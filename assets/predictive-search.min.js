!function(t){"use strict";t(window),t(document),t("html");var e=t("body"),s=(T4Srequest.page_type,T4Sroutes.search_url),i=T4SThemeSP.cacheNameFirst,n=!!("ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),r=function(){function i(e){this.container=e,this.$container=t(e),this.deferRequestBy=300,this.cachedResults={},this.$form=this.$container.find("[data-frm-search]"),this.form=this.$form[0],this.$input=this.$container.find("[data-input-search]"),this.input=this.$input[0],this.$results=this.$container.find("[data-results-search]"),this.results=this.$results[0],this.$skeleton=this.$container.find("[data-skeleton-search]"),this.$formListkey=this.$form.find("[data-listkey-search]"),this.isOpen=!1,this.sectionID=this.$container.attr("data-sid")||"predictive-search",this.$title=this.$container.find("[data-title-search]"),this.title=this.$title[0],this.$viewall=this.$container.find("[data-viewAll-search]"),this.viewall=this.$viewall[0],this.$select=this.$container.find("[data-cat-search]>select"),this.select=this.$select[0],this.currentVal=this.$select.val()||"*",this.hasClassTerms=!1,this.searchUrlForm=this.$form.serialize(),this.setupEventListeners(),this.onClickKey()}return i.prototype=Object.assign({},i.prototype,{setupEventListeners:function(){this.form.addEventListener("submit",this.onFormSubmit.bind(this)),this.input.addEventListener("input",this.debounce(t=>{this.onChange(t)},this.deferRequestBy).bind(this)),this.input.addEventListener("focus",this.onFocus.bind(this)),this.select&&this.select.addEventListener("change",this.onChangeSelectCat.bind(this)),this.container.addEventListener("focusout",this.onFocusOut.bind(this)),this.container.addEventListener("keyup",this.onKeyup.bind(this)),this.container.addEventListener("keydown",this.onKeydown.bind(this))},debounce:function(t,e){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>t.apply(this,i),e)}},getQuery:function(){var t=this.input.value.trim();if(this.select){var e=this.currentVal.trim();"*"!=e&&(t=`product_type:${e} AND ${t}`)}return t},onChange:function(){var t=this.getQuery();if(!t.length)return this.close(!0),void(this.hasClassTerms&&(this.form.classList.remove("has--search-terms"),this.hasClassTerms=!1));this.getSearchResults(t),this.hasClassTerms||(this.form.classList.add("has--search-terms"),this.hasClassTerms=!0)},onFormSubmit:function(t){this.getQuery().length&&!this.container.querySelector('[aria-selected="true"] a')||t.preventDefault()},onFocus:function(){const t=this.getQuery();t.length&&("true"===this.container.getAttribute("results")?this.open():this.getSearchResults(t))},onChangeSelectCat:function(){this.currentVal=this.$select.val();const t=this.getQuery();t.length&&this.getSearchResults(t)},onClickKey:function(){var e,s=this;s.$container.find("[data-listKey]").on("click","[data-key]",function(i){i.preventDefault();var r=t(this);n?s.$input.val(r.attr("data-key")):(s.$input.val(r.attr("data-key")).focus(),s.$container.addClass("showing--results"),clearTimeout(e),e=setTimeout(function(){s.$container.removeClass("showing--results")},1500)),s.input.dispatchEvent(new Event("input",{bubbles:!0}))}),s.$form.on("click","[data-clear-search]",function(t){t.preventDefault(),s.$input.val(""),s.input.dispatchEvent(new Event("input",{bubbles:!0}))}),s.$container.on("opendDrawer",function(e){n||t(this).one("transitionend webkitTransitionEnd oTransitionEnd",function(){s.$input.focus()})})},onFocusOut:function(){setTimeout(()=>{this.container.contains(document.activeElement)||this.close()})},onKeyup:function(t){switch(this.getQuery().length||this.close(!0),t.preventDefault(),t.code){case"ArrowUp":this.switchOption("up");break;case"ArrowDown":this.switchOption("down");break;case"Enter":this.selectOption()}},onKeydown:function(t){"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault()},switchOption:function(t){if(!this.container.getAttribute("open"))return;const e="up"===t,s=this.results.querySelector('[aria-selected="true"]'),i=this.results.querySelectorAll("li");let n=this.results.querySelector("li");e&&!s||(!e&&s?n=s.nextElementSibling||i[0]:e&&(n=s.previousElementSibling||i[i.length-1]),n!==s&&(n.setAttribute("aria-selected",!0),s&&s.setAttribute("aria-selected",!1),this.setLiveRegionText(n.textContent),this.input.setAttribute("aria-activedescendant",n.id)))},selectOption:function(){const t=this.container.querySelector('[aria-selected="true"] a, [aria-selected="true"] button, .t4s-mini-search__viewAll');t&&t.click()},getSearchResults:function(t){const e=t.replace(" ","-").toLowerCase();this.setLiveRegionLoadingState(),this.cachedResults[e]?this.renderSearchResults(this.cachedResults[e]):fetch(`${s}/?${this.searchUrlForm}${encodeURIComponent(t)}&section_id=${this.sectionID}`).then(t=>{if(!t.ok){var e=new Error(t.status);throw this.close(),e}return t.text()}).then(t=>{const s=(new DOMParser).parseFromString(t,"text/html").querySelector(`#shopify-section-${this.sectionID}`).innerHTML;this.cachedResults[e]=s,this.renderSearchResults(s)}).catch(t=>{throw this.close(),t})},setLiveRegionLoadingState:function(){this.$skeletonElement=this.statusElement||this.$skeleton,this.$skeletonElement.show(),this.$results.hide(),this.$formListkey.hide(),this.$viewall.hide(),this.container.setAttribute("loading",!0)},renderSearchResults:function(t){var s=(new DOMParser).parseFromString(t,"text/html");this.title&&(this.title.innerHTML=s.querySelector("[data-title-search]").innerHTML),this.results&&(this.results.innerHTML=s.querySelector("[data-results-search]").innerHTML);try{this.viewall.innerHTML=s.querySelector("[data-viewAll-search]").innerHTML}catch(t){}e.trigger("currency:update"),this.container.setAttribute("results",!0),this.setLiveRegionResults(),this.open()},setLiveRegionResults:function(){this.$skeletonElement.hide(),this.$results.show(),this.$viewall.show(),this.$formListkey.show(),this.$title.show(),this.container.removeAttribute("loading")},getResultsMaxHeight:function(){return this.resultsMaxHeight=window.innerHeight-document.querySelector(".t4s-section-header").getBoundingClientRect().bottom,this.resultsMaxHeight},open:function(){this.results.style.maxHeight=this.resultsMaxHeight||`${this.getResultsMaxHeight()}px`,this.container.setAttribute("open",!0),this.input.setAttribute("aria-expanded",!0),this.isOpen=!0},close:function(t=!1){t&&(this.input.value="",this.container.removeAttribute("results"));const e=this.container.querySelector('[aria-selected="true"]');e&&e.setAttribute("aria-selected",!1),this.input.setAttribute("aria-activedescendant",""),this.container.removeAttribute("open"),this.input.setAttribute("aria-expanded",!1),this.resultsMaxHeight=!1,this.results.removeAttribute("style"),this.isOpen=!1}}),i}();T4SThemeSP.predictiveSearchInt=function(){var e,s,n,h;function o(){t("[data-predictive-search]:not(is--inted)").each(function(){t(this).addClass("is--inted"),this.predictiveSearch=new r(this)})}e="timeSearchT4s"+i,s="dataSearchT4s"+i,n=isStorageSpSession&&sessionStorage.getItem(e)||0,n=parseInt(n),h=t("#t4s-search-hidden"),n>0&&n>=Date.now()?T4SThemeSP.Helpers.promiseStylesheet(T4Sconfigs.stylesheet4).then(function(){h.html(sessionStorage.getItem(s)),o()}):T4SThemeSP.getToFetchSection("?section_id=search-hidden").then(i=>{"NVT_94"!=i&&T4SThemeSP.Helpers.promiseStylesheet(T4Sconfigs.stylesheet4).then(function(){h.html(t(i).html()),o(),isStorageSpSession&&(n=Date.now()+24e6,sessionStorage.setItem(e,n),sessionStorage.setItem(s,t(i).html()))})})}}(jQuery_T4NT),jQuery_T4NT(document).ready(function(t){T4SThemeSP.predictiveSearchInt()});